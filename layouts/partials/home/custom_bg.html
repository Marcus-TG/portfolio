<script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>

<div id="tsparticles"></div>

<script>
  window.addEventListener("load", function() {
    console.log("Page loaded. Checking for tsParticles library...");

    // SAFETY CHECK: Make sure the library exists before running
    if (typeof tsParticles === "undefined") {
      console.error("tsParticles library not found! A browser extension (like MetaMask) might be blocking it.");
      return;
    }

    const currentPath = window.location.pathname;
    
    // Check if we are on the homepage
    // We allow "/" OR "/index.html"
    const isHomePage = currentPath === "/" || currentPath === "/index.html" || currentPath.includes("/en/");

    if (!isHomePage) {
      console.log("Not the homepage. Stopping particles.");
      return; 
    }

    console.log("Homepage confirmed. Initializing...");

    // FORCE TRANSPARENCY
    const elementsToClear = [
        document.body, 
        document.documentElement,
        document.querySelector("main"), 
        document.querySelector(".bg-neutral"),
        document.querySelector(".dark\\:bg-neutral-800")
    ];

    elementsToClear.forEach(el => {
        if (el) el.style.setProperty("background-color", "transparent", "important");
    });

    // LOAD PARTICLES
    tsParticles.load("tsparticles", {
      particles: {
        number: { value: 120 },
        links: { enable: true, distance: 150, color: "#8748b8", opacity: 0.4 },
        move: { enable: true, speed: 1.5 },
        size: { value: { min: 1, max: 3 } },
        color: { value: "#8748b8" }
      },
      interactivity: {
        events: { onHover: { enable: true, mode: "grab" } }
      }
    });
  });
</script>
